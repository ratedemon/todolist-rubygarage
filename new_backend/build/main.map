{"version":3,"sources":["webpack:///webpack/bootstrap 64e1f052d45645c109c9","webpack:///external \"sequelize\"","webpack:///./src/models/project/model.js","webpack:///./src/models/task/model.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"dotenv\"","webpack:///./src/models/user/model.js","webpack:///./src/db.js","webpack:///external \"jsonwebtoken\"","webpack:///./src/index.js","webpack:///external \"koa\"","webpack:///external \"koa-morgan\"","webpack:///./src/router.js","webpack:///external \"koa-router\"","webpack:///external \"koa-body\"","webpack:///./src/middleware/authMiddleware.js","webpack:///external \"regenerator-runtime\"","webpack:///./src/controllers/user.js","webpack:///external \"bcrypt\"","webpack:///./src/controllers/project.js","webpack:///./src/controllers/task.js","webpack:///external \"koa2-cors\"","webpack:///external \"koa-static\""],"names":["Project","db","define","id","type","Sequelize","INTEGER","primaryKey","autoIncrement","name","STRING","notNull","user_id","references","model","key","deferrable","Deferrable","INITIALLY_IMMEDIATE","hasMany","foreignKey","onDelete","as","Task","status","BOOLEAN","allowNull","defaultValue","position","project_id","User","email","isEmail","notEmpty","unique","password","env","config","dbString","process","DATABASE_URL","DB_USER","DB_PASSWORD","DB_HOST","DB_PORT","DB_DATABASE","ssl","console","log","dialectOptions","sync","then","app","use","cors","serve","__dirname","routes","allowedMethods","logger","listen","PORT","router","koaBody","post","UserController","register","login","get","ProjectController","getProjectsWithTasks","create","put","update","delete","TaskController","updateName","changeStatus","changePosition","ctx","next","authorization","headers","match","throw","token","replace","jwt","verify","JWT_KEY","encode","request","body","verifyAuth","findOne","where","user","bcrypt","compare","sign","expiresIn","hash","error","project","params","destroy","findAll","include","order","projects","verifyProject","task","task_id"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,sC;;;;;;;;;;;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,UAAU,uDAAAC,CAAGC,MAAH,CAAU,UAAV,EAAsB;AAClCC,QAAI;AACAC,cAAM,iDAAAC,CAAUC,OADhB;AAEAC,oBAAY,IAFZ;AAGAC,uBAAe;AAHf,KAD8B;AAMlCC,UAAM;AACFL,cAAM,iDAAAC,CAAUK,MADd;AAEFC,iBAAS;AAFP,KAN4B;AAUlCC,aAAS;AACLR,cAAM,iDAAAC,CAAUC,OADX;AAELO,oBAAY;AACRC,mBAAO,4DADC;AAERC,iBAAK,IAFG;AAGRC,wBAAY,iDAAAX,CAAUY,UAAV,CAAqBC;AAHzB;AAFP;AAVyB,CAAtB,CAAhB;;AAoBAlB,QAAQmB,OAAR,CAAgB,4DAAhB,EAAsB,EAACC,YAAY,YAAb,EAA2BC,UAAU,SAArC,EAAgDC,IAAI,cAApD,EAAtB;AACA;;AAEA,yDAAetB,OAAf,E;;;;;;;;;;AC9BA;AAAA;AACA;AACA;AACA;AACA;;AAEA,MAAMuB,OAAO,uDAAAtB,CAAGC,MAAH,CAAU,OAAV,EAAmB;AAC5BC,QAAI;AACAC,cAAM,iDAAAC,CAAUC,OADhB;AAEAC,oBAAY,IAFZ;AAGAC,uBAAe;AAHf,KADwB;AAM5BC,UAAM;AACFL,cAAM,iDAAAC,CAAUK,MADd;AAEFC,iBAAS;AAFP,KANsB;AAU5Ba,YAAQ;AACJpB,cAAM,iDAAAC,CAAUoB,OADZ;AAEJC,mBAAW,KAFP;AAGJC,sBAAc;AAHV,KAVoB;AAe5BC,cAAU;AACNxB,cAAM,iDAAAC,CAAUC,OADV;AAENoB,mBAAW,IAFL;AAGNC,sBAAc;AAHR,KAfkB;AAoB5BE,gBAAY;AACRzB,cAAM,iDAAAC,CAAUC,OADR;AAERO,oBAAY;AACRC,mBAAO,+DADC;AAERC,iBAAK,IAFG;AAGRC,wBAAY,iDAAAX,CAAUY,UAAV,CAAqBC;AAHzB;AAFJ;AApBgB,CAAnB,CAAb;;AA8BA;AACA;;AAEA,yDAAeK,IAAf,E;;;;;;ACvCA;;;;;;;ACAA,mC;;;;;;;;;ACAA;AAAA;AACA;AACA;;AAEA;;AAEA,MAAMO,OAAO,uDAAA7B,CAAGC,MAAH,CAAU,OAAV,EAAmB;AAC9BC,MAAI;AACFC,UAAM,iDAAAC,CAAUC,OADd;AAEFC,gBAAY,IAFV;AAGFC,mBAAe;AAHb,GAD0B;AAM9BC,QAAM,iDAAAJ,CAAUK,MAAV,CAAiB,EAAjB,CANwB;AAO9BqB,SAAO;AACL3B,UAAK,iDAAAC,CAAUK,MAAV,CAAiB,EAAjB,CADA;AAELsB,aAAS,IAFJ;AAGLrB,aAAS,IAHJ;AAILe,eAAW,KAJN;AAKLO,cAAU,IALL;AAMLC,YAAQ;AANH,GAPuB;AAe9BC,YAAU,iDAAA9B,CAAUK,MAAV,CAAiB,EAAjB;AAfoB,CAAnB,CAAb;AAiBA,yDAAeoB,IAAf,E;;;;;;;;;;;ACvBA;AACA;;AAEA,8CAAAM,CAAIC,MAAJ;;AAEA,MAAMC,WAAWC,QAAQH,GAAR,CAAYI,YAAZ,IAA6B,cAAaD,QAAQH,GAAR,CAAYK,OAAQ,IAAGF,QAAQH,GAAR,CAAYM,WAAY,IAAGH,QAAQH,GAAR,CAAYO,OAAQ,IAAGJ,QAAQH,GAAR,CAAYQ,OAAQ,IAAGL,QAAQH,GAAR,CAAYS,WAAY,EAAnL;AACA,MAAMC,MAAM,CAAC,CAACP,QAAQH,GAAR,CAAYI,YAA1B;AACAO,QAAQC,GAAR,CAAYV,QAAZ,EAAsBQ,GAAtB;AACA,MAAM7C,KAAK,IAAI,iDAAJ,CAAcqC,QAAd,EAAwB;AAC/BW,kBAAgB,EAACH,GAAD;AADe,CAAxB,CAAX;AAGA;;;;;;AAMA;;AAEA7C,GAAGiD,IAAH,GACGC,IADH,CACQ,MAAM;AACVJ,UAAQC,GAAR,CAAY,WAAZ;AACD,CAHH;;AAKA,yDAAe/C,EAAf,E;;;;;;ACxBA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAAAmC,CAAIC,MAAJ;;AAEA,MAAMe,MAAM,IAAI,2CAAJ,EAAZ;AACAA,IAAIC,GAAJ,CAAQ,iDAAAC,EAAR;AACAF,IAAIC,GAAJ,CAAQ,kDAAAE,CAAMC,YAAY,UAAlB,CAAR;AACAT,QAAQC,GAAR,CAAYQ,YAAY,UAAxB;AACAJ,IAAIC,GAAJ,CAAQ,+DAAAI,EAAR;;AAEAL,IAAIC,GAAJ,CAAQ,uEAAAK,EAAR;;AAEAN,IAAIC,GAAJ,CAAQ,kDAAAM,CAAO,MAAP,CAAR,EAAwBC,MAAxB,CAA+BrB,QAAQH,GAAR,CAAYyB,IAA3C,EAAiD,MAAI;AACnDd,UAAQC,GAAR,CAAa,qBAAoBT,QAAQH,GAAR,CAAYyB,IAAK,KAAlD;AACD,CAFD,E;;;;;;;ACjBA,gC;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAAAzB,CAAIC,MAAJ;;AAEA,MAAMyB,SAAS,IAAI,kDAAJ,EAAf;;AAEAA,OAAOT,GAAP,CAAW,gDAAAU,EAAX;;AAEAD,OAAOE,IAAP,CAAY,WAAZ,EAAyB,kEAAAC,CAAeC,QAAxC;AACAJ,OAAOE,IAAP,CAAY,QAAZ,EAAsB,kEAAAC,CAAeE,KAArC;;AAEAL,OAAOM,GAAP,CAAW,WAAX,EAAwB,2EAAxB,EAAoC,qEAAAC,CAAkBC,oBAAtD;AACAR,OAAOE,IAAP,CAAY,UAAZ,EAAwB,2EAAxB,EAAoC,qEAAAK,CAAkBE,MAAtD;AACAT,OAAOU,GAAP,CAAW,UAAX,EAAuB,2EAAvB,EAAmC,qEAAAH,CAAkBI,MAArD;AACAX,OAAOY,MAAP,CAAc,cAAd,EAA8B,2EAA9B,EAA0C,qEAAAL,CAAkBK,MAA5D;;AAEAZ,OAAOE,IAAP,CAAY,OAAZ,EAAqB,2EAArB,EAAiC,kEAAAW,CAAeJ,MAAhD;AACAT,OAAOU,GAAP,CAAW,OAAX,EAAoB,2EAApB,EAAgC,kEAAAG,CAAeC,UAA/C;AACAd,OAAOU,GAAP,CAAW,cAAX,EAA2B,2EAA3B,EAAuC,kEAAAG,CAAeE,YAAtD;AACAf,OAAOU,GAAP,CAAW,gBAAX,EAA6B,2EAA7B,EAAyC,kEAAAG,CAAeG,cAAxD;AACAhB,OAAOY,MAAP,CAAc,oCAAd,EAAoD,2EAApD,EAAgE,kEAAAC,CAAeD,MAA/E;;AAEO,SAASjB,MAAT,GAAkB;AACrB,WAAOK,OAAOL,MAAP,EAAP;AACH;AACM,SAASC,cAAT,GAA0B;AAC7B,WAAOI,OAAOJ,cAAP,EAAP;AACH,C;;;;;;ACpCD,uC;;;;;;ACAA,qC;;;;;;;;;;;;;;;;;oLCQA,iBAA0BqB,GAA1B,EAA+BC,IAA/B;AAAA;AAAA;AAAA;AAAA;AACUC,iCADV,GAC0BF,IAAIG,OAAJ,CAAYD,aADtC;;AAEI,wBAAG,CAACA,aAAD,IAAkB,CAACA,cAAcE,KAAd,CAAoB,WAApB,CAAtB,EAAuD;AACnDJ,4BAAIK,KAAJ,CAAU,GAAV;AACH;AACKC,yBALV,GAKkBJ,cAAcK,OAAd,CAAsB,WAAtB,EAAmC,EAAnC,CALlB;AAAA;AAAA;AAAA,2BAO6B,oDAAAC,CAAIC,MAAJ,CAAWH,KAAX,EAAkB9C,QAAQH,GAAR,CAAYqD,OAA9B,CAP7B;;AAAA;AAOcC,0BAPd;;AAQQX,wBAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF,EAAjB,GAAsBuF,OAAOvF,EAA7B;AACA4E,wBAAIY,OAAJ,CAAYC,IAAZ,CAAiB7D,KAAjB,GAAyB2D,OAAO3D,KAAhC;AATR;AAAA,2BAUciD,MAVd;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAYQjC,4BAAQC,GAAR;AACA+B,wBAAIK,KAAJ,CAAU,GAAV;;AAbR;AAAA;AAAA;AAAA;AAAA;AAAA,K;;oBAAeS,U;;;;;;;AARf;;;AAGA;AACA;;AAEA,8CAAAzD,CAAIC,MAAJ;;;;;;;;ACNA,gD;;;;;;;;;;;;;;;;;;ACAA;;;AAGA;AACA;AACA;;AAEe,MAAM4B,cAAN,CAAoB;AAC/B,WAAaE,KAAb,CAAmBY,GAAnB,EAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACA,mEAAAjD,CAAKgE,OAAL,CAAa;AAC5BC,mCAAO;AACHhE,uCAAOgD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB7D;AADrB;AADqB,yBAAb,CADA;;AAAA;AACbiE,4BADa;;AAAA,4BAMfA,IANe;AAAA;AAAA;AAAA;;AAAA,yDAMFjB,IAAIK,KAAJ,CAAU,GAAV,CANE;;AAAA;AAAA;AAAA;AAAA,+BAQO,8CAAAa,CAAOC,OAAP,CAAenB,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzD,QAAhC,EAA0C6D,KAAK7D,QAA/C,CARP;;AAAA;AAQT+D,+BARS;;AAAA,6BASZA,OATY;AAAA;AAAA;AAAA;;AAAA;AAAA,+BAUS,oDAAAX,CAAIY,IAAJ,CAAS;AACzBhG,gCAAI6F,KAAK7F,EADgB;AAEzB4B,mCAAOiE,KAAKjE;AAFa,yBAAT,EAGjBQ,QAAQH,GAAR,CAAYqD,OAHK,EAGI;AACpBW,uCAAW;AADS,yBAHJ,CAVT;;AAAA;AAULf,6BAVK;AAAA,yDAgBJN,IAAIa,IAAJ,GAAW,EAACP,OAAOA,KAAR,EAhBP;;AAAA;AAAA,yDAkBJN,IAAIK,KAAJ,CAAU,GAAV,CAlBI;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAqBfrC,gCAAQC,GAAR;AArBe,yDAsBR+B,IAAIK,KAAJ,CAAU,GAAV,CAtBQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBtB;AACD,WAAalB,QAAb,CAAsBa,GAAtB,EAA0B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAEC,8CAAAkB,CAAOI,IAAP,CAAYtB,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzD,QAA7B,EAAuC,EAAvC,CAFD;;AAAA;AAEZkE,4BAFY;AAAA;AAAA,+BAGC,mEAAAvE,CAAKyC,MAAL,CAAY;AAC3B9D,kCAAMsE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBnF,IADI;AAE3BsB,mCAAOgD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB7D,KAFG;AAG3BI,sCAAUkE;AAHiB,yBAAZ,CAHD;;AAAA;AAGZL,4BAHY;AAAA,0DAQXjB,IAAIvD,MAAJ,GAAa,GARF;;AAAA;AAAA;AAAA;;AAUlBuB,gCAAQC,GAAR;AAVkB,0DAWX+B,IAAIK,KAAJ,CAAU,GAAV,EAAe;AAClBkB;AADkB,yBAAf,CAXW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAezB;AAzC8B,C;;;;;;;;ACPnC,mC;;;;;;;;;;;;;;;ACAA;;;AAGA;AACA;;AAEe,MAAMjC,iBAAN,CAAuB;AAClC,WAAaE,MAAb,CAAoBQ,GAApB,EAAwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBhC,gCAAQC,GAAR,CAAY+B,IAAIY,OAAJ,CAAYC,IAAxB;AADoB;AAAA;AAAA,+BAGM,sEAAA5F,CAAQuE,MAAR,CAAe;AACjC9D,kCAAMsE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBnF,IADU;AAEjCG,qCAASmE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF;AAFO,yBAAf,CAHN;;AAAA;AAGVoG,+BAHU;AAAA,yDAOTxB,IAAIa,IAAJ,GAAW,EAACW,SAASA,OAAV,EAPF;;AAAA;AAAA;AAAA;;AAShBxD,gCAAQC,GAAR;AATgB,yDAUT+B,IAAIK,KAAJ,CAAU,GAAV,CAVS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYvB;AACD,WAAaX,MAAb,CAAoBM,GAApB,EAAwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBhC,gCAAQC,GAAR,CAAY+B,IAAIY,OAAJ,CAAYC,IAAxB;AADoB;AAAA;AAAA,+BAGM,sEAAA5F,CAAQyE,MAAR,CAAe;AACjChE,kCAAMsE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBnF;AADU,yBAAf,EAEpB;AACEsF,mCAAO;AACHnF,yCAASmE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF,EADvB;AAEHA,oCAAI4E,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D;AAFlB;AADT,yBAFoB,CAHN;;AAAA;AAGV0E,+BAHU;AAAA,0DAWTxB,IAAIa,IAAJ,GAAWW,OAXF;;AAAA;AAAA;AAAA;AAAA,0DAaTxB,IAAIK,KAAJ,CAAU,GAAV,CAbS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAevB;AACD,WAAaV,MAAb,CAAoBK,GAApB,EAAwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBhC,gCAAQC,GAAR,CAAY+B,IAAIyB,MAAJ,CAAWrG,EAAvB;AADoB;AAAA;AAAA,+BAGM,sEAAAH,CAAQyG,OAAR,CAAgB;AAClCV,mCAAO;AACH5F,oCAAI4E,IAAIyB,MAAJ,CAAWrG,EADZ;AAEHS,yCAASmE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF;AAFvB;AAD2B,yBAAhB,CAHN;;AAAA;AAGVoG,+BAHU;AAAA,0DASTxB,IAAIa,IAAJ,GAAWW,OATF;;AAAA;AAAA;AAAA;;AAWhBxD,gCAAQC,GAAR;AAXgB,0DAYT+B,IAAIK,KAAJ,CAAU,GAAV,CAZS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcvB;AACD,WAAad,oBAAb,CAAkCS,GAAlC,EAAsC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACX,sEAAA/E,CAAQ0G,OAAR,CAAgB;AACnCX,mCAAO;AACHnF,yCAASmE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF;AADvB,6BAD4B;AAInCwG,qCAAS,CACL;AACI7F,uCAAO,mEADX;AAEIQ,oCAAI;AAFR,6BADK,CAJ0B;AAUnCsF,mCAAO,CACH,CAAC,IAAD,EAAO,MAAP,CADG;AAV4B,yBAAhB,CADW;;AAAA;AAC5BC,gCAD4B;;AAelC9D,gCAAQC,GAAR,CAAY6D,QAAZ;AACA9B,4BAAIa,IAAJ,GAAWiB,QAAX;;AAhBkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBrC;AA9DiC,C;;;;;;;;;;;;;;;;;ACNtC;;;AAGA;AACA;;AAEe,MAAMlC,cAAN,CAAoB;AAC/B,WAAaJ,MAAb,CAAoBQ,GAApB,EAAwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACEJ,eAAemC,aAAf,CAA6B/B,GAA7B,CADF;;AAAA;AACdwB,+BADc;AAAA;AAAA;AAAA,+BAIG,mEAAAhF,CAAKgD,MAAL,CAAY;AAC3B9D,kCAAMsE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBnF,IADI;AAE3BoB,wCAAYkD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D;AAFF,yBAAZ,CAJH;;AAAA;AAIVkF,4BAJU;;AAQhBhC,4BAAIa,IAAJ,GAAWmB,IAAX;AARgB;AAAA;;AAAA;AAAA;AAAA;;AAUhBhE,gCAAQC,GAAR;AACA+B,4BAAIK,KAAJ,CAAU,GAAV;;AAXgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAavB;AACD,WAAaR,UAAb,CAAwBG,GAAxB,EAA4B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACFJ,eAAemC,aAAf,CAA6B/B,GAA7B,CADE;;AAAA;AAClBwB,+BADkB;;AAAA,4BAEpBA,OAFoB;AAAA;AAAA;AAAA;;AAAA,0DAEJxB,IAAIK,KAAJ,CAAU,GAAV,CAFI;;AAAA;AAAA;AAAA;AAAA,+BAID,mEAAA7D,CAAKkD,MAAL,CAAY;AAC3BhE,kCAAMsE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBnF;AADI,yBAAZ,EAEjB;AACEsF,mCAAO;AACHlE,4CAAYkD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D,UAD1B;AAEH1B,oCAAI4E,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBoB;AAFlB;AADT,yBAFiB,CAJC;;AAAA;AAIdD,4BAJc;;AAYpBhC,4BAAIa,IAAJ,GAAWmB,IAAX;AAZoB;AAAA;;AAAA;AAAA;AAAA;;AAcpBhE,gCAAQC,GAAR;AACA+B,4BAAIK,KAAJ,CAAU,GAAV;;AAfoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAiB3B;AACD,WAAaV,MAAb,CAAoBK,GAApB,EAAwB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACEJ,eAAemC,aAAf,CAA6B/B,GAA7B,CADF;;AAAA;AACdwB,+BADc;;AAAA,4BAKhBA,OALgB;AAAA;AAAA;AAAA;;AAAA,0DAKAxB,IAAIK,KAAJ,CAAU,GAAV,CALA;;AAAA;AAAA;AAAA;AAAA,+BAOG,mEAAA7D,CAAKkF,OAAL,CAAa;AAC5BV,mCAAO;AACH5F,oCAAI4E,IAAIyB,MAAJ,CAAWQ,OADZ;AAEHnF,4CAAYkD,IAAIyB,MAAJ,CAAW3E;AAFpB;AADqB,yBAAb,CAPH;;AAAA;AAOVkF,4BAPU;AAAA,0DAaThC,IAAIa,IAAJ,GAAWmB,IAbF;;AAAA;AAAA;AAAA;;AAehBhE,gCAAQC,GAAR;AACA+B,4BAAIK,KAAJ,CAAU,GAAV;;AAhBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBvB;AACD,WAAaN,cAAb,CAA4BC,GAA5B,EAAgC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACNJ,eAAemC,aAAf,CAA6B/B,GAA7B,CADM;;AAAA;AACtBwB,+BADsB;;AAAA,4BAExBA,OAFwB;AAAA;AAAA;AAAA;;AAAA,0DAERxB,IAAIK,KAAJ,CAAU,GAAV,CAFQ;;AAAA;AAAA;AAAA;AAAA,+BAIL,mEAAA7D,CAAKkD,MAAL,CAAY;AACvB7C,sCAAUmD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBhE;AADJ,yBAAZ,EAGf;AACImE,mCAAO;AACHlE,4CAAYkD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D,UAD1B;AAEH1B,oCAAI4E,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBoB;AAFlB;AADX,yBAHe,CAJK;;AAAA;AAIlBD,4BAJkB;;AAAA,6BAcrBA,KAAK,CAAL,CAdqB;AAAA;AAAA;AAAA;;AAAA,0DAebhC,IAAIa,IAAJ,GAAWmB,IAfE;;AAAA;AAAA,0DAiBbhC,IAAIK,KAAJ,CAAU,GAAV,CAjBa;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAoBxBrC,gCAAQC,GAAR;AACA+B,4BAAIK,KAAJ,CAAU,GAAV;;AArBwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAuB/B;AACD,WAAaP,YAAb,CAA0BE,GAA1B,EAA8B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACJJ,eAAemC,aAAf,CAA6B/B,GAA7B,CADI;;AAAA;AACpBwB,+BADoB;;AAAA,4BAEtBA,OAFsB;AAAA;AAAA;AAAA;;AAAA,0DAENxB,IAAIK,KAAJ,CAAU,GAAV,CAFM;;AAAA;AAAA;AAAA;AAAA,+BAIH,mEAAA7D,CAAKkD,MAAL,CAAY;AACvBjD,oCAAQuD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBpE;AADF,yBAAZ,EAGf;AACIuE,mCAAO;AACHlE,4CAAYkD,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D,UAD1B;AAEH1B,oCAAI4E,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBoB;AAFlB;AADX,yBAHe,CAJG;;AAAA;AAIhBD,4BAJgB;;AAAA,6BAcnBA,KAAK,CAAL,CAdmB;AAAA;AAAA;AAAA;;AAAA,0DAeXhC,IAAIa,IAAJ,GAAWmB,IAfA;;AAAA;AAAA,0DAiBXhC,IAAIK,KAAJ,CAAU,GAAV,CAjBW;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAoBtBrC,gCAAQC,GAAR;AACA+B,4BAAIK,KAAJ,CAAU,GAAV;;AArBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAuB7B;AACD,WAAa0B,aAAb,CAA2B/B,GAA3B,EAA+B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACL,sEAAA/E,CAAQ8F,OAAR,CAAgB;AAClCC,mCAAO;AACH5F,oCAAI4E,IAAIY,OAAJ,CAAYC,IAAZ,CAAiB/D,UAAjB,IAA+BkD,IAAIyB,MAAJ,CAAW3E,UAD3C;AAEHjB,yCAASmE,IAAIY,OAAJ,CAAYC,IAAZ,CAAiBzF;AAFvB;AAD2B,yBAAhB,CADK;;AAAA;AACrBoG,+BADqB;AAAA,0DAOpBA,OAPoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQ9B;AA5G8B,C;;;;;;;;ACNnC,sC;;;;;;ACAA,uC","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 64e1f052d45645c109c9","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 0\n// module chunks = 0","//import Joi from 'joi';\r\n//import schema from './schema';\r\nimport Sequelize from 'sequelize';\r\nimport db from '../../db.js';\r\nimport User from '../user/model';\r\nimport Task from '../task/model';\r\n\r\nconst Project = db.define('projects', {\r\n    id: {\r\n        type: Sequelize.INTEGER,\r\n        primaryKey: true,\r\n        autoIncrement: true,\r\n    },\r\n    name: {\r\n        type: Sequelize.STRING,\r\n        notNull: true\r\n    },\r\n    user_id: {\r\n        type: Sequelize.INTEGER,\r\n        references: {\r\n            model: User,\r\n            key: 'id',\r\n            deferrable: Sequelize.Deferrable.INITIALLY_IMMEDIATE\r\n        }\r\n    }\r\n});\r\n\r\nProject.hasMany(Task, {foreignKey: 'project_id', onDelete: 'cascade', as: 'ProjectTasks'});\r\n// Project.belongsToMany(Task, {as: \"tasks\", through: \"project_tasks\", foreignKey: 'task_id', otherKey: \"project_id\"});\r\n\r\nexport default Project;\n\n\n// WEBPACK FOOTER //\n// ./src/models/project/model.js","//import Joi from 'joi';\r\n//import schema from './schema';\r\nimport Sequelize from 'sequelize';\r\nimport db from '../../db.js';\r\nimport Project from '../project/model';\r\n\r\nconst Task = db.define('tasks', {\r\n    id: {\r\n        type: Sequelize.INTEGER,\r\n        primaryKey: true,\r\n        autoIncrement: true,\r\n    },\r\n    name: {\r\n        type: Sequelize.STRING,\r\n        notNull: true\r\n    },\r\n    status: {\r\n        type: Sequelize.BOOLEAN,\r\n        allowNull: false,\r\n        defaultValue: false\r\n    },\r\n    position: {\r\n        type: Sequelize.INTEGER,\r\n        allowNull: true,\r\n        defaultValue: null\r\n    },\r\n    project_id: {\r\n        type: Sequelize.INTEGER,\r\n        references: {\r\n            model: Project,\r\n            key: 'id',\r\n            deferrable: Sequelize.Deferrable.INITIALLY_IMMEDIATE\r\n        }\r\n    }\r\n});\r\n\r\n// Task.belongsToMany(Project, {as: \"projects\", through: \"project_tasks\", foreignKey: 'project_id', otherKey: \"task_id\"});\r\n// Task.belongsTo(Project);\r\n\r\nexport default Task;\n\n\n// WEBPACK FOOTER //\n// ./src/models/task/model.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 3\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 4\n// module chunks = 0","//import Joi from 'joi';\r\n//import schema from './schema';\r\nimport Sequelize from 'sequelize';\r\n\r\nimport db from '../../db.js';\r\n\r\nconst User = db.define('users', {\r\n  id: {\r\n    type: Sequelize.INTEGER,\r\n    primaryKey: true,\r\n    autoIncrement: true,\r\n  },\r\n  name: Sequelize.STRING(30),\r\n  email: {\r\n    type:Sequelize.STRING(40),\r\n    isEmail: true,\r\n    notNull: true,\r\n    allowNull: false,\r\n    notEmpty: true,\r\n    unique: true\r\n  },\r\n  password: Sequelize.STRING(70)\r\n});\r\nexport default User;\n\n\n// WEBPACK FOOTER //\n// ./src/models/user/model.js","import Sequelize from 'sequelize';\r\nimport env from 'dotenv';\r\n\r\nenv.config();\r\n\r\nconst dbString = process.env.DATABASE_URL || `postgres://${process.env.DB_USER}:${process.env.DB_PASSWORD}@${process.env.DB_HOST}:${process.env.DB_PORT}/${process.env.DB_DATABASE}`;\r\nconst ssl = !!process.env.DATABASE_URL;\r\nconsole.log(dbString, ssl);\r\nconst db = new Sequelize(dbString, {\r\n    dialectOptions: {ssl}\r\n});\r\n/*const db = new Sequelize(process.env.DB_DATABASE, process.env.DB_USER, process.env.DB_PASSWORD, {\r\n  dialect: 'postgres',\r\n  host: process.env.DB_HOST,\r\n  port: process.env.DB_PORT\r\n});\r\n*/\r\n// db.authenticate().then(function(errors) { console.log(errors) });\r\n\r\ndb.sync()\r\n  .then(() => {\r\n    console.log('DB synced');\r\n  });\r\n\r\nexport default db;\n\n\n// WEBPACK FOOTER //\n// ./src/db.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 7\n// module chunks = 0","import Koa from 'koa';\r\nimport logger from 'koa-morgan';\r\nimport env from 'dotenv';\r\nimport {routes, allowedMethods} from './router';\r\nimport cors from 'koa2-cors';\r\nimport serve from 'koa-static';\r\n\r\nenv.config();\r\n\r\nconst app = new Koa();\r\napp.use(cors());\r\napp.use(serve(__dirname + '/../dist'));\r\nconsole.log(__dirname + '/../dist');\r\napp.use(routes());\r\n\r\napp.use(allowedMethods());\r\n\r\napp.use(logger('tiny')).listen(process.env.PORT, ()=>{\r\n  console.log(`Listening on port ${process.env.PORT}...`);\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"koa-morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-morgan\"\n// module id = 11\n// module chunks = 0","import Router from 'koa-router';\r\nimport User from './models/user/model';\r\nimport Project from './models/project/model';\r\nimport Task from './models/task/model';\r\nimport koaBody from 'koa-body';\r\nimport env from 'dotenv';\r\nimport verifyAuth from './middleware/authMiddleware';\r\nimport UserController from './controllers/user';\r\nimport ProjectController from './controllers/project';\r\nimport TaskController from './controllers/task';\r\n\r\nenv.config();\r\n\r\nconst router = new Router();\r\n\r\nrouter.use(koaBody());\r\n\r\nrouter.post('/register', UserController.register);\r\nrouter.post('/login', UserController.login);\r\n\r\nrouter.get('/projects', verifyAuth, ProjectController.getProjectsWithTasks);\r\nrouter.post('/project', verifyAuth, ProjectController.create);\r\nrouter.put('/project', verifyAuth, ProjectController.update);\r\nrouter.delete('/project/:id', verifyAuth, ProjectController.delete);\r\n\r\nrouter.post('/task', verifyAuth, TaskController.create);\r\nrouter.put('/task', verifyAuth, TaskController.updateName);\r\nrouter.put('/task/status', verifyAuth, TaskController.changeStatus);\r\nrouter.put('/task/position', verifyAuth, TaskController.changePosition);\r\nrouter.delete('/project/:project_id/task/:task_id', verifyAuth, TaskController.delete);\r\n\r\nexport function routes() {\r\n    return router.routes();\r\n}\r\nexport function allowedMethods() {\r\n    return router.allowedMethods();\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-body\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-body\"\n// module id = 14\n// module chunks = 0","/**\r\n * Created by rated on 27.01.2018.\r\n */\r\nimport jwt from 'jsonwebtoken';\r\nimport env from 'dotenv';\r\n\r\nenv.config();\r\n\r\nasync function verifyAuth(ctx, next) {\r\n    const authorization = ctx.headers.authorization;\r\n    if(!authorization || !authorization.match(/^Bearer\\s/)){\r\n        ctx.throw(403);\r\n    }\r\n    const token = authorization.replace(/^Bearer\\s/, '');\r\n    try{\r\n        const encode = await jwt.verify(token, process.env.JWT_KEY);\r\n        ctx.request.body.id = encode.id;\r\n        ctx.request.body.email = encode.email;\r\n        await next();\r\n    }catch(e){\r\n        console.log(e);\r\n        ctx.throw(403);\r\n    }\r\n}\r\n\r\nexport { verifyAuth as default };\n\n\n// WEBPACK FOOTER //\n// ./src/middleware/authMiddleware.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 16\n// module chunks = 0","/**\r\n * Created by rated on 28.01.2018.\r\n */\r\nimport User from '../models/user/model';\r\nimport bcrypt from 'bcrypt';\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nexport default class UserController{\r\n    static async login(ctx){\r\n        const user = await User.findOne({\r\n            where: {\r\n                email: ctx.request.body.email\r\n            }\r\n        });\r\n        if(!user) return ctx.throw(404);\r\n        try{\r\n            const compare = await bcrypt.compare(ctx.request.body.password, user.password);\r\n            if(compare){\r\n                const token = await jwt.sign({\r\n                    id: user.id,\r\n                    email: user.email\r\n                }, process.env.JWT_KEY, {\r\n                    expiresIn: \"3h\"\r\n                });\r\n                return ctx.body = {token: token};\r\n            } else {\r\n                return ctx.throw(409);\r\n            }\r\n        }catch(e){\r\n            console.log(e);\r\n            return ctx.throw(403);\r\n        }\r\n    }\r\n    static async register(ctx){\r\n        try {\r\n            const hash = await bcrypt.hash(ctx.request.body.password, 10);\r\n            const user = await User.create({\r\n                name: ctx.request.body.name,\r\n                email: ctx.request.body.email,\r\n                password: hash\r\n            });\r\n            return ctx.status = 200;\r\n        } catch (e) {\r\n            console.log(e);\r\n            return ctx.throw(500, {\r\n                error: e\r\n            });\r\n        }\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/user.js","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 18\n// module chunks = 0","/**\r\n * Created by rated on 28.01.2018.\r\n */\r\nimport Project from '../models/project/model';\r\nimport Task from '../models/task/model';\r\n\r\nexport default class ProjectController{\r\n    static async create(ctx){\r\n        console.log(ctx.request.body);\r\n        try{\r\n            const project = await Project.create({\r\n                name: ctx.request.body.name,\r\n                user_id: ctx.request.body.id\r\n            });\r\n            return ctx.body = {project: project};\r\n        }catch(e){\r\n            console.log(e);\r\n            return ctx.throw(400)\r\n        }\r\n    }\r\n    static async update(ctx){\r\n        console.log(ctx.request.body);\r\n        try{\r\n            const project = await Project.update({\r\n                name: ctx.request.body.name\r\n            },{\r\n                where: {\r\n                    user_id: ctx.request.body.id,\r\n                    id: ctx.request.body.project_id\r\n                }\r\n            });\r\n            return ctx.body = project;\r\n        }catch(e){\r\n            return ctx.throw(403);\r\n        }\r\n    }\r\n    static async delete(ctx){\r\n        console.log(ctx.params.id);\r\n        try{\r\n            const project = await Project.destroy({\r\n                where: {\r\n                    id: ctx.params.id,\r\n                    user_id: ctx.request.body.id\r\n                }\r\n            });\r\n            return ctx.body = project;\r\n        }catch(e){\r\n            console.log(e);\r\n            return ctx.throw(403);\r\n        }\r\n    }\r\n    static async getProjectsWithTasks(ctx){\r\n        const projects = await Project.findAll({\r\n            where: {\r\n                user_id: ctx.request.body.id\r\n            },\r\n            include: [\r\n                {\r\n                    model: Task,\r\n                    as: 'ProjectTasks'\r\n                }\r\n            ],\r\n            order: [\r\n                ['id', 'DESC']\r\n            ]\r\n        });\r\n        console.log(projects);\r\n        ctx.body = projects;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/project.js","/**\r\n * Created by rated on 28.01.2018.\r\n */\r\nimport Project from '../models/project/model';\r\nimport Task from '../models/task/model';\r\n\r\nexport default class TaskController{\r\n    static async create(ctx){\r\n        const project = await TaskController.verifyProject(ctx);\r\n        // if(!project) return ctx.throw(403);\r\n        try{\r\n            const task = await Task.create({\r\n                name: ctx.request.body.name,\r\n                project_id: ctx.request.body.project_id\r\n            });\r\n            ctx.body = task;\r\n        }catch(e){\r\n            console.log(e);\r\n            ctx.throw(400);\r\n        }\r\n    }\r\n    static async updateName(ctx){\r\n        const project = await TaskController.verifyProject(ctx);\r\n        if(!project) return ctx.throw(403);\r\n        try{\r\n            const task = await Task.update({\r\n                name: ctx.request.body.name,\r\n            },{\r\n                where: {\r\n                    project_id: ctx.request.body.project_id,\r\n                    id: ctx.request.body.task_id\r\n                }\r\n            });\r\n            ctx.body = task;\r\n        }catch(e){\r\n            console.log(e);\r\n            ctx.throw(400);\r\n        }\r\n    }\r\n    static async delete(ctx){\r\n        const project = await TaskController.verifyProject(ctx);\r\n        // const project = await Project.findOne({\r\n        //     where:\r\n        // });\r\n        if(!project) return ctx.throw(403);\r\n        try{\r\n            const task = await Task.destroy({\r\n                where: {\r\n                    id: ctx.params.task_id,\r\n                    project_id: ctx.params.project_id\r\n                }\r\n            });\r\n            return ctx.body = task;\r\n        }catch(e){\r\n            console.log(e);\r\n            ctx.throw(400);\r\n        }\r\n    }\r\n    static async changePosition(ctx){\r\n        const project = await TaskController.verifyProject(ctx);\r\n        if(!project) return ctx.throw(403);\r\n        try{\r\n            const task = await Task.update({\r\n                    position: ctx.request.body.position,\r\n                },\r\n                {\r\n                    where: {\r\n                        project_id: ctx.request.body.project_id,\r\n                        id: ctx.request.body.task_id\r\n                    }\r\n                }\r\n            );\r\n            if(task[0]){\r\n                return ctx.body = task;\r\n            }else{\r\n                return ctx.throw(403);\r\n            }\r\n        }catch(e){\r\n            console.log(e);\r\n            ctx.throw(400);\r\n        }\r\n    }\r\n    static async changeStatus(ctx){\r\n        const project = await TaskController.verifyProject(ctx);\r\n        if(!project) return ctx.throw(403);\r\n        try{\r\n            const task = await Task.update({\r\n                    status: ctx.request.body.status,\r\n                },\r\n                {\r\n                    where: {\r\n                        project_id: ctx.request.body.project_id,\r\n                        id: ctx.request.body.task_id\r\n                    }\r\n                }\r\n            );\r\n            if(task[0]){\r\n                return ctx.body = task;\r\n            }else{\r\n                return ctx.throw(403);\r\n            }\r\n        }catch(e){\r\n            console.log(e);\r\n            ctx.throw(400);\r\n        }\r\n    }\r\n    static async verifyProject(ctx){\r\n        const project = await Project.findOne({\r\n            where: {\r\n                id: ctx.request.body.project_id || ctx.params.project_id,\r\n                user_id: ctx.request.body.id\r\n            }\r\n        });\r\n        return project;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/task.js","module.exports = require(\"koa2-cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa2-cors\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}